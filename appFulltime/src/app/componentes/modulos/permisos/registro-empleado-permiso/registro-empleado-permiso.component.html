<div id="titulo">
    <mat-icon id="movilidad" class="float-left">open_with</mat-icon>
    <span cdkDrag cdkDragRootElement=".cdk-overlay-pane" ngDefaultControl [(ngModel)]="num"
        [ngModelOptions]="{standalone: true}">
        SOLICITUD DE PERMISO N° {{num}}</span>
    <mat-icon class="float-right" id="cerrar" (click)="ventana.close(false)">highlight_off</mat-icon>
</div>
<div class="scrollbar scrollbar-primary">
    <!-- FORMULARIO COMPLETO -->
    <form [formGroup]="PermisoForm">
        <mat-card-content>
            <div class="container" style="text-align: center;">
                <div class="nota">
                    <span>NOTA: Por favor llenar todos los campos obligatorios (*) del formulario para activar el botón
                        Guardar.</span>
                </div>

                <div class="info" *ngIf="informacion">
                    <span>INFORMACIÓN PERMISO: &nbsp;&nbsp; Dias Máximos: {{Tdias}} días &nbsp;&nbsp; Horas Máximas:
                        {{Thoras}} horas </span>
                </div>
                <div>
                    <div class="row">
                        <div class="col-md">
                            <div class="d-flex flex-wrap justify-content-around">
                                <mat-form-field>
                                    <mat-label>Motivo</mat-label>
                                    <mat-icon id="i-cursor" matSuffix matTooltipPosition="right"
                                        matTooltip="Seleccionar tipo de permiso.">
                                        help_outline</mat-icon>
                                    <mat-select [formControl]="idPermisoF" required>
                                        <mat-option *ngFor="let per of tipoPermisos"
                                            (click)="ImprimirDatos(PermisoForm.value)" [value]="per.id">
                                            {{per.descripcion}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>Permiso por:</mat-label>
                                    <mat-icon id="i-cursor" matSuffix matTooltipPosition="right"
                                        matTooltip="Seleccionar si el permiso será por días o por horas y minutos">
                                        help_outline</mat-icon>
                                    <mat-select [formControl]="solicitarF" required>
                                        <mat-option *ngFor="let dh of diasHoras" [value]="dh.valor"
                                            (click)="ActivarDiasHoras(PermisoForm.value)">
                                            {{dh.nombre}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>Observación</mat-label>
                                    <textarea matInput #message maxlength="150" [formControl]="descripcionF"></textarea>
                                    <mat-icon id="i-cursor" matSuffix matTooltipPosition="right"
                                        matTooltip="Ingresar observaciones del permiso.">
                                        help_outline</mat-icon>
                                    <mat-hint align="end">{{message.value.length}} / 150</mat-hint>
                                </mat-form-field>
                            </div>
                            <div class="d-flex flex-wrap justify-content-around"
                                style="padding-top: 20px; padding-right: 100px;">
                                <mat-checkbox color="warn" [checked]="legalizado" [disabled]="true">
                                    Legalizado
                                </mat-checkbox>
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="d-flex flex-wrap justify-content-around">
                                <mat-form-field *ngIf="activar_fecha">
                                    <mat-label>Fecha desde</mat-label>
                                    <input matInput [matDatepicker]="picker2"
                                        (dateInput)="validarFechaSalida($event, PermisoForm.value)" readonly
                                        placeholder="dd/mm/aaaa" [formControl]="fechaInicioF" min="1950-01-31"
                                        max="2050-01-31" required>
                                    <mat-datepicker-toggle matSuffix [for]="picker2" id="i-cursor"
                                        matTooltipPosition="right"
                                        matTooltip="Indicar la fecha en la desea el permiso. Seleccione la fecha dando click en el icono de calendario o puede escribir la fecha con el formato  día/mes/año. Ejemplo: 12/04/1993">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker touchUi #picker2></mat-datepicker>
                                </mat-form-field>
                                <mat-form-field *ngIf="activar_fecha">
                                    <mat-label>Fecha hasta</mat-label>
                                    <input matInput [matDatepicker]="picker3"
                                        (dateInput)="validarFechaIngreso($event, PermisoForm.value)"
                                        placeholder="dd/mm/aaaa" [formControl]="fechaFinalF" required readonly>
                                    <mat-datepicker-toggle matSuffix [for]="picker3" id="i-cursor"
                                        matTooltipPosition="right"
                                        matTooltip="Indicar la fecha de finalización del permiso. Seleccione la fecha dando click en el icono de calendario o puede escribir la fecha con el formato  día/mes/año. Ejemplo: 12/04/1993">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker touchUi #picker3></mat-datepicker>
                                </mat-form-field>

                                <mat-form-field *ngIf="activar_hora">
                                    <mat-label>Hora desde</mat-label>
                                    <input matInput type="time" (keypress)="IngresarSoloNumeros($event)"
                                        [formControl]="horaSalidaF" required>
                                </mat-form-field>
                                <mat-form-field *ngIf="activar_hora">
                                    <mat-label>Hora hasta</mat-label>
                                    <input matInput type="time" (keypress)="IngresarSoloNumeros($event)"
                                        [formControl]="horaIngresoF" required>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="d-flex flex-wrap justify-content-around">
                                <mat-form-field *ngIf="habilitarHoras">
                                    <mat-label>Horas y minutos de permiso</mat-label>
                                    <input matInput type="time" max="7:30" [formControl]="horasF" readonly>
                                    <mat-icon id="i-cursor" matSuffix matTooltipPosition="right"
                                        matTooltip="Horas descuento de solicitud de permiso.">
                                        help_outline</mat-icon>
                                </mat-form-field>
                                <mat-form-field *ngIf="habilitarDias">
                                    <mat-label>Días de permiso</mat-label>
                                    <input matInput placeholder="Ej: 3" (keypress)="IngresarSoloNumeros($event)"
                                        [formControl]="diasF" id="dias" readonly>
                                    <mat-icon id="i-cursor" matSuffix matTooltipPosition="right"
                                        matTooltip="Días descuento de permisos">
                                        help_outline</mat-icon>
                                </mat-form-field>
                                <mat-form-field *ngIf="habilitarDias">
                                    <mat-label id="letras">Días Laborables</mat-label>
                                    <input matInput readonly placeholder="Días laborables" [formControl]="diaLaboralF">
                                    <mat-icon id="i-cursor" matSuffix matTooltipPosition="right"
                                        matTooltip="Número de días laborables solicitados para permiso.">
                                        help_outline</mat-icon>
                                </mat-form-field>
                                <mat-form-field *ngIf="habilitarDias">
                                    <mat-label id="letras">Días Libres</mat-label>
                                    <input matInput readonly placeholder="Días libres" [formControl]="diaLibreF"
                                        id="Dlibres">
                                    <mat-icon id="i-cursor" matSuffix matTooltipPosition="right"
                                        matTooltip="Número de días libres dentro de la solicitud de permiso.">
                                        help_outline</mat-icon>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md">
                            <div class="d-flex flex-wrap justify-content-around">
                                <section class="d-flex flex-column bd-highlight">
                                    <div class="bd-highlight">
                                        <form method="post" enctype="multipart/form-data">
                                            <input (change)="fileChange($event)" type="file" [formControl]="archivoForm"
                                                id="file">
                                            <label for="file" class="btn-2" (click)="LimpiarNombreArchivo()">Subir
                                                Certificado</label>
                                        </form>
                                    </div>
                                    <div class="bd-highlight">
                                        <input type="text" id="respaldo" placeholder="Ningún archivo seleccionado"
                                            class="form-control" style="width: 200px;"
                                            [formControl]="nombreCertificadoF">
                                        <i *ngIf="HabilitarBtn" class="far fa-trash-alt"
                                            style="color:red; margin-left: 5px;" id="i-cursor"
                                            (click)="RetirarArchivo()" matSuffix matTooltipPosition="right"
                                            matTooltip="Eliminar archivo seleccionado.">
                                        </i>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </mat-card-content>
    </form>
    <div style="text-align: center;">
        <button type="submit" class="btn btn-sm" (click)="ValidarHora_Salida_Entrada(PermisoForm.value)"
            [disabled]="!PermisoForm.valid"> Guardar </button>
        <button type="submit" class="btn btn-sm" (click)="CerrarVentanaPermiso()"> Salir </button>
    </div>
</div>